## License

Copyright (c) [2025] [Dawn_ARC]. All rights reserved.

未经明确授权,严禁使用、复制、修改或分发本代码。


#### V0.4.0
移除了SM2的相关逻辑和依赖,增强了用户密码的安全性,避免了可能存在的安全隐患。对代码健壮性进行增强,避免出现空指针类型的错误

**1. 移除了 SM2 加密相关的功能:**
   *   移除了 SM2 加密和解密 JWT 的逻辑, JWT 现在只使用 HS256 算法签名。

**2. 用户密码处理:**
   *   在用户注册时,使用 SM3 算法对密码进行哈希处理,并添加盐以提高安全性。

**3. 错误处理:**
   *   加强了抛出内容的检验，提高维护便捷度


### 待办列表
#### 紧急修复

- [x] 敏感信息硬编码移除

	- [x] API以及Token
	- [x] Salt++
	- [x] 调试信息移除

- [x] Token验证逻辑统一
	- [x] 健壮度提高
	
- [x] **极高优先级**SM2加密算法更改！
#### 高优先级
- [ ] 国密密钥生成流程改造（等待客户端完善代码中）
	- [x] 用户登录注册改造
	- [ ] 表单信息传输
- [x] 用户注册优化
- [x] 依赖版本固化
#### 中长期优化
- [x] 日志系统集成
- [x] 错误抛回修复（部分修复）
- [ ] 性能压测与优化 
- [ ] 模块函数复用优化（屎山优化）

### 功能概述总结

1. **用户注册与登录**
2. **应急预案创建与查询**
3. **事件记录创建与查询**
4. **安全检查记录创建与查询**
5. **JWT认证与权限管理**
6. **日志记录（系统和工作日志）**
7. **登录尝试记录与账户禁止机制**


### 项目功能概述

1. **用户管理**
   - **用户注册**: 新用户可以注册账号，并在注册过程中生成SM2密钥对。
   - **用户登录**: 用户可以使用用户名进行登录，系统会返回一个JWT令牌用于后续认证。
   - **刷新Token**: 用户可以使用现有的JWT令牌来获取一个新的令牌，延长会话时间。

2. **应急预案管理**
   - **创建应急预案**: 用户可以创建新的应急预案，包括预案详情、版本号和状态。
   - **获取应急预案**: 用户可以通过应急预案ID获取特定的应急预案详情。

3. **事件管理**
   - **创建事件记录**: 用户可以记录新的事件，包括事件信息、处理状态、响应日志、事件级别和分配资源。
   - **获取事件记录**: 用户可以通过事件ID获取特定的事件详情。

4. **安全检查管理**
   - **创建安全检查记录**: 用户可以记录新的安全检查，包括检查记录、问题跟踪、改进建议状态和评估报告。
   - **获取安全检查记录**: 用户可以通过安全检查ID获取特定的安全检查详情。

5. **认证与授权**
   - **JWT认证**: 使用JWT Token进行用户身份验证，确保API请求的安全性。
   - **权限控制**: 仅允许具有适当权限的用户执行某些操作，如创建用户等。

6. **日志记录**
   - **系统日志**: 记录系统操作，包括操作类型、操作员ID、操作内容和结果等。
   - **工作日志**: 记录用户的工作进展、日志内容、文件引用等。

7. **登录尝试记录**
   - **记录登录尝试**: 记录用户的登录尝试，包括尝试时间、IP地址和是否成功等。
   - **账户禁止机制**: 如果用户多次尝试登录失败，账户将被暂时禁止登录。
     

## 环境配置以及API文档均在setup目录下，请自行阅读


## Contributors

鸣谢以下贡献者对项目做出的贡献！
*   [Dawn ARC](https://github.com/A-Dawn) - 代码编写、文档更新、BUG修复

<a href="https://github.com/A-Dawn/air_emergency_response/graphs/contributors">
  <img src="https://contrib.rocks/image?repo=A-Dawn/air_emergency_response" />
</a>

[![Contributors](https://img.shields.io/github/contributors/A-Dawn/air_emergency_response)](https://github.com/A-Dawn/air_emergency_response/graphs/contributors)
